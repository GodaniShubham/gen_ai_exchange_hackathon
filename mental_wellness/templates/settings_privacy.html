{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings & Privacy | Saharathi AI</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white min-h-screen flex justify-center items-center font-sans">

  <section class="w-full max-w-3xl p-8 
    bg-black/60 backdrop-blur-xl 
    rounded-3xl shadow-[0_15px_40px_rgb(0,0,0,0.8)] 
    border border-gray-800/50 animate-fade-in 
    relative overflow-hidden">

    <!-- Background Neon Glow -->
    <div class="absolute inset-0 rounded-3xl 
      bg-gradient-to-r from-blue-500/15 via-purple-500/15 to-pink-500/15 blur-3xl animate-pulse"></div>

    <!-- Header -->
    <header class="relative z-10 text-center mb-8">
      <h1 class="text-4xl font-extrabold text-white tracking-tight drop-shadow-xl">
        ⚙️ Settings & Privacy
      </h1>
    </header>

    <!-- Flash Messages -->
    {% if messages %}
    <div id="messages" class="space-y-3 mb-8 relative z-10">
      {% for message in messages %}
      <div class="p-4 rounded-2xl shadow-xl transition-all duration-500 animate-slide-down
        {% if message.tags == 'success' %} bg-green-600/90 text-white 
        {% elif message.tags == 'error' %} bg-red-600/90 text-white
        {% else %} bg-gray-700/80 text-gray-100 {% endif %}">
        <span class="font-semibold">{{ message }}</span>
      </div>
      {% endfor %}
    </div>
    {% endif %}

    <!-- Divider -->
    <div class="h-px w-full bg-gradient-to-r from-gray-700 via-gray-600 to-gray-700 mb-8"></div>

    <!-- Language Selection -->
    <section class="relative z-10 mb-10 bg-gray-900/50 rounded-3xl p-6 shadow-inner backdrop-blur-sm">
      <h2 class="text-sm font-semibold text-gray-400 mb-4">🌐 Language Choice</h2>
      <form method="POST" action="{% url 'settings_privacy' %}" class="flex flex-col gap-4">
        {% csrf_token %}
        <select id="language-select" name="language"
          class="w-full p-4 rounded-2xl bg-gray-800/80 border border-gray-700 text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-400 shadow-md transition duration-300">
          <option value="English" {% if saved_lang == "English" %}selected{% endif %}>English</option>
          <option value="हिंदी" {% if saved_lang == "हिंदी" %}selected{% endif %}>हिंदी</option>
          <option value="தமிழ்" {% if saved_lang == "தமிழ்" %}selected{% endif %}>தமிழ்</option>
          <option value="తెలుగు" {% if saved_lang == "తెలుగు" %}selected{% endif %}>తెలుగు</option>
          <option value="मराठी" {% if saved_lang == "मराठी" %}selected{% endif %}>मराठी</option>
        </select>
        <button type="submit" name="action" value="set_language"
          class="mt-3 w-full bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white font-semibold py-3 px-5 rounded-2xl shadow-lg hover:shadow-xl transition transform hover:scale-105 active:scale-97">
          💾 Save Language
        </button>
      </form>
    </section>

    <!-- Data Control -->
    <section class="relative z-10 mb-10 bg-gray-900/50 rounded-3xl p-6 shadow-inner backdrop-blur-sm">
      <h2 class="text-sm font-semibold text-gray-400 mb-4">🗑️ Data Control</h2>
      <form method="POST" action="{% url 'settings_privacy' %}" class="flex flex-col gap-4">
        {% csrf_token %}
        <button type="submit" name="action" value="clear"
          onclick="return confirm('Are you sure you want to clear all data?');"
          class="w-full bg-gradient-to-r from-red-600 via-rose-600 to-pink-600 text-white font-semibold py-3 px-5 rounded-2xl shadow-lg hover:shadow-xl transition transform hover:scale-105 active:scale-97">
          🧹 Clear All Data
        </button>
        <button type="submit" name="action" value="export"
          class="w-full bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 text-white font-semibold py-3 px-5 rounded-2xl shadow-lg hover:shadow-xl transition transform hover:scale-105 active:scale-97">
          📤 Export My Data
        </button>
      </form>
    </section>

    <!-- Divider -->
    <div class="h-px w-full bg-gradient-to-r from-gray-700 via-gray-600 to-gray-700 mb-6"></div>

    <!-- Privacy Note -->
    <p class="text-center text-sm text-gray-400 italic relative z-10">🔒 Your data is safe & confidential.</p>

  </section>

  <!-- Animations -->
  <style>
    @keyframes fade-in {
      from { opacity: 0; transform: translateY(20px) scale(0.95); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    .animate-fade-in { animation: fade-in 1s ease-in-out; }

    @keyframes slide-down {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-slide-down { animation: slide-down 0.6s ease-out; }

    button:active {
      transform: scale(0.97);
      transition: transform 0.1s;
    }
  </style>

  <!-- Auto dismiss messages -->
  <script>
    setTimeout(() => {
      const messages = document.getElementById("messages");
      if(messages){
        messages.classList.add("opacity-0", "transition", "duration-1000");
        setTimeout(() => messages.remove(), 1000);
      }
    }, 4000);
  </script>

</body>
</html>
