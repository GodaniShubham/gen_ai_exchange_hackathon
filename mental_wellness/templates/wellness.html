<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wellness Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      margin:0; font-family:'Poppins', sans-serif; color:white;
      background:linear-gradient(-45deg,#0f172a,#1e293b,#0f766e,#2563eb);
      background-size:400% 400%;
      animation:gradientMove 12s ease infinite;
    }
    @keyframes gradientMove {
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }
    .glass {
      background:rgba(255,255,255,0.08);
      backdrop-filter:blur(14px);
      border-radius:1rem;
      padding:1.5rem;
      box-shadow:0 0 25px rgba(0,255,204,0.15);
      transition:transform .2s ease, box-shadow .2s ease;
    }
    .glass:hover {
      transform:translateY(-4px) scale(1.02);
      box-shadow:0 0 40px rgba(0,255,204,0.3);
    }
    /* Neon Checkbox */
    .challenge-item input[type="checkbox"] {
      appearance: none;
      width: 22px; height: 22px;
      border: 2px solid #22d3ee;
      border-radius: 6px;
      margin-right: 10px;
      position: relative;
      cursor: pointer;
      transition: 0.3s;
    }
    .challenge-item input[type="checkbox"]:checked {
      background: #22d3ee;
      box-shadow: 0 0 10px #22d3ee, 0 0 20px #22d3ee;
    }
    .challenge-item input[type="checkbox"]:checked::after {
      content: "âœ”";
      position: absolute;
      color: #0f172a;
      font-weight: bold;
      left: 4px; top: -1px;
    }
  </style>
</head>
<body class="flex flex-col items-center p-6">

  <!-- HEADER -->
  <h1 class="text-4xl font-extrabold mb-4"><i class="fa fa-heart text-pink-400"></i> Wellness Dashboard</h1>

  <!-- STREAK (Shifted UP) -->
  <div class="glass text-center w-full max-w-3xl mb-6">
    <h2 class="text-2xl font-bold"><i class="fa fa-fire text-yellow-400"></i> Streak: <span id="streakCount">0</span> days</h2>
    <div id="streakFlames" class="flex justify-center gap-1 mt-2"></div>
  </div>

  <!-- MOOD TRACKER -->
  <div class="glass text-center mb-6 w-full max-w-3xl">
    <h2 class="text-2xl font-bold mb-4"><i class="fa fa-face-smile text-yellow-400"></i> How are you feeling today?</h2>
    <div id="moodOptions" class="flex flex-wrap justify-center gap-4 mb-2">
      <button class="glass px-4 py-2" data-mood="happy">ðŸ˜Š Happy</button>
      <button class="glass px-4 py-2" data-mood="stressed">ðŸ˜“ Stressed</button>
      <button class="glass px-4 py-2" data-mood="sad">ðŸ˜” Sad</button>
      <button class="glass px-4 py-2" data-mood="energetic">âš¡ Energetic</button>
      <button class="glass px-4 py-2" data-mood="angry">ðŸ˜¡ Angry</button>
    </div>
    <p class="text-gray-300 text-sm">Select your mood and get personalized tips + challenges ðŸŒ¿</p>
  </div>

  <!-- MOOD TIPS -->
  <div id="moodTips" class="hidden glass w-full max-w-3xl mb-6">
    <h2 class="text-2xl font-bold mb-4">ðŸŒŸ Wellness Tips for You</h2>
    <div id="tipsContainer" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
  </div>

  <!-- DAILY CHALLENGES -->
  <div id="challengesBox" class="hidden glass w-full max-w-3xl mb-6">
    <h2 class="text-2xl font-bold mb-4"><i class="fa fa-list-check text-cyan-300"></i> Today's Challenges</h2>
    <div id="challengeList" class="space-y-3"></div>
  </div>

  <!-- MOTIVATION MESSAGES -->
  <div id="motivationBox" class="glass w-full max-w-3xl text-center hidden">
    <h2 class="text-xl font-bold mb-2">ðŸŒŸ Motivation Boost</h2>
    <p id="motivationText" class="text-lg"></p>
  </div>

  <!-- CONFETTI CANVAS -->
  <canvas id="confettiCanvas" class="fixed top-0 left-0 w-full h-full pointer-events-none"></canvas>

  <!-- REWARD MODAL -->
  <div id="rewardModal" class="fixed inset-0 bg-black/70 hidden flex items-center justify-center z-50">
    <div class="glass text-center p-8 max-w-md">
      <h2 class="text-3xl font-bold mb-4">ðŸŽ‰ Congratulations!</h2>
      <p id="rewardMessage" class="text-lg mb-4"></p>
      <button onclick="closeReward()" class="bg-cyan-400 text-black px-4 py-2 rounded-lg font-bold hover:bg-cyan-300 transition">
        Awesome ðŸš€
      </button>
    </div>
  </div>

  <!-- FOOTER -->
 <div class="text-center mt-16 mb-10">
    <a href="{% url 'selfcare' %}" 
       class="px-6 py-3 rounded-lg bg-gradient-to-r from-cyan-400 to-green-400 text-white font-semibold hover:scale-105 transition inline-block">
       <i class="fa fa-arrow-left"></i> Back to Self-Care Guides
    </a>
  </div>

<script>
  // --- MOOD DATA ---
  const moodData = {
    happy: {
      tips: ["Share your smile ðŸ˜ƒ","Write down 3 things that made you happy","Do something kind for a friend","Capture the moment ðŸ“¸"],
      challenges: [
        "Spread positivity: Compliment 2 people",
        "Dance to your favorite song ðŸ’ƒ",
        "Write down 3 happy memories",
        "Take a fun selfie & smile",
        "Call a friend and laugh together",
        "Cook something you love ðŸ²"
      ]
    },
    stressed: {
      tips: ["Take 5 deep breaths ðŸ§˜","Stretch for 2 minutes","Listen to calming music ðŸŽ¶","Write down what's stressing you out"],
      challenges: [
        "Do a 5-min meditation",
        "Unplug from your phone for 30 min",
        "Drink chamomile tea ðŸµ",
        "Write 1 thing you're grateful for",
        "Do 10 mins yoga",
        "Take a power nap ðŸ˜´"
      ]
    },
    sad: {
      tips: ["Talk to a close friend ðŸ’¬","Write in your journal âœï¸","Take a short walk ðŸš¶","Remind yourself: this will pass ðŸ’–"],
      challenges: [
        "Call a loved one â¤ï¸",
        "Go outside for 10 minutes ðŸŒ³",
        "Listen to uplifting music ðŸŽ¶",
        "Write 3 things you like about yourself",
        "Watch a funny video ðŸ˜‚",
        "Draw or doodle ðŸŽ¨"
      ]
    },
    energetic: {
      tips: ["Go for a jog or dance it out ðŸ’ƒ","Channel energy into a creative task ðŸŽ¨","Encourage someone else","Start a fun challenge âš¡"],
      challenges: [
        "Do 20 push-ups ðŸ’ª",
        "Dance for 10 minutes",
        "Try a new workout",
        "Do 5 mins of jumping jacks",
        "Run up and down stairs",
        "Do 10 burpees"
      ]
    },
    angry: {
      tips: ["Take a break: walk away ðŸ§˜","Splash water on your face ðŸš¿","Write feelings then tear it","Do slow breathing for 2 mins"],
      challenges: [
        "Punch a pillow for release ðŸ¥Š",
        "Do 15 mins exercise",
        "Write your anger in a journal",
        "Practice forgiveness",
        "Do 20 push-ups",
        "Take a cold shower ðŸš¿"
      ]
    }
  };

  const rewardMessages = [
    "ðŸŽ– You unlocked the *Mindful Master* badge!",
    "ðŸŒŸ Great job! Hereâ€™s a *Wellness Star* for you.",
    "ðŸ’Ž You earned a *Diamond of Discipline*!",
    "ðŸ† Champion! Youâ€™ve won todayâ€™s *Health Hero* trophy.",
    "ðŸŽ Surprise! You get a *Self-Care Gift Box*."
  ];

  const moodButtons=document.querySelectorAll("#moodOptions button");
  const moodTips=document.getElementById("moodTips");
  const tipsContainer=document.getElementById("tipsContainer");
  const challengeList=document.getElementById("challengeList");
  const challengesBox=document.getElementById("challengesBox");
  let checkboxes=[];

  // streak
  let streak=parseInt(localStorage.getItem("wellnessStreak"))||0;
  let lastDate=localStorage.getItem("lastCompletedDate")||null;
  const streakCount=document.getElementById("streakCount");
  const streakFlames=document.getElementById("streakFlames");

  // Random challenge picker
  function getRandomChallenges(arr,count){
    let shuffled=[...arr].sort(()=>0.5-Math.random());
    return shuffled.slice(0,count);
  }

  moodButtons.forEach(btn=>{
    btn.addEventListener("click",()=>{
      const mood=btn.dataset.mood;

      // Tips
      tipsContainer.innerHTML="";
      moodData[mood].tips.forEach(tip=>{
        const card=document.createElement("div");
        card.className="glass p-4 text-center transform transition hover:rotate-1 hover:scale-105";
        card.innerHTML=`<p class="text-lg">${tip}</p>`;
        tipsContainer.appendChild(card);
      });
      moodTips.classList.remove("hidden");

      // Random challenges
      challengeList.innerHTML="";
      const randomChallenges=getRandomChallenges(moodData[mood].challenges,4);
      randomChallenges.forEach((ch,idx)=>{
        const label=document.createElement("label");
        label.className="challenge-item flex items-center text-lg";
        label.innerHTML=`<input type="checkbox" value="${idx}"> ${ch}`;
        challengeList.appendChild(label);
      });
      challengesBox.classList.remove("hidden");

      checkboxes=document.querySelectorAll("#challengeList input[type='checkbox']");
      checkboxes.forEach(cb=>{
        cb.addEventListener("change",()=>{
          if(cb.checked) showMotivation();
          checkAllDone();
        });
      });
    });
  });

  // Motivation
  const motivationMessages=["ðŸ”¥ Nice! Keep it going!","ðŸ’ª Thatâ€™s the spirit!","ðŸŒŸ Youâ€™re unstoppable!","âš¡ Boom! Next level!","âœ¨ Finish strong!"];
  const motivationBox=document.getElementById("motivationBox");
  const motivationText=document.getElementById("motivationText");

  function showMotivation(){
    motivationBox.classList.remove("hidden");
    motivationText.textContent=motivationMessages[Math.floor(Math.random()*motivationMessages.length)];
  }

  function showReward() {
    const msg = rewardMessages[Math.floor(Math.random() * rewardMessages.length)];
    document.getElementById("rewardMessage").innerHTML = msg;
    document.getElementById("rewardModal").classList.remove("hidden");
  }

  function closeReward() {
    document.getElementById("rewardModal").classList.add("hidden");
  }

  function checkAllDone(){
    let completed=[...checkboxes].filter(cb=>cb.checked).length;
    if(completed===checkboxes.length && checkboxes.length>0){
      let today=new Date().toDateString();
      if(lastDate!==today){
        streak++;
        lastDate=today;
        localStorage.setItem("wellnessStreak",streak);
        localStorage.setItem("lastCompletedDate",lastDate);
        launchConfetti();
        showReward(); // ðŸŽ‰ reward added here
      }
      updateStreakUI();
      motivationText.textContent="ðŸŽ‰ All done! Youâ€™re amazing! Streak boosted!";
    }
  }

  function updateStreakUI(){
    streakCount.textContent=streak;
    streakFlames.innerHTML="";
    for(let i=0;i<streak;i++){
      streakFlames.innerHTML+=`<i class="fa fa-fire text-yellow-400 animate-bounce"></i>`;
    }
  }
  updateStreakUI();

  // Confetti
  const canvas=document.getElementById("confettiCanvas");
  const ctx=canvas.getContext("2d");
  let confetti=[];
  let confettiInterval;

  function launchConfetti(){
    confetti=[];
    for(let i=0;i<200;i++){
      confetti.push({
        x:Math.random()*window.innerWidth,
        y:Math.random()*window.innerHeight-window.innerHeight,
        r:Math.random()*6+2,
        d:Math.random()*0.5+0.5,
        color:`hsl(${Math.random()*360},100%,50%)`
      });
    }
    animateConfetti();
    clearTimeout(confettiInterval);
    confettiInterval=setTimeout(()=>{confetti=[];ctx.clearRect(0,0,canvas.width,canvas.height)},5000);
  }

  function animateConfetti(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    confetti.forEach(p=>{
      ctx.beginPath();
      ctx.arc(p.x,p.y,p.r,0,Math.PI*2,false);
      ctx.fillStyle=p.color;
      ctx.fill();
      p.y+=p.d*5;
      if(p.y>canvas.height)p.y=-10;
    });
    if(confetti.length)requestAnimationFrame(animateConfetti);
  }
  window.addEventListener("resize",()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;});
  canvas.width=window.innerWidth;canvas.height=window.innerHeight;
</script>

</body>
</html>
